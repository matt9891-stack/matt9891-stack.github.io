---
layout: post
title: "Unit 4 Data Visualisation Learnings Activity"
subtitle: "Book Exercises R"
date: 2026-02-21
categories: [Module 4 Visualising Data]
tags: [R,ggplot]
---
[R SCRIPT](https://github.com/matt9891-stack/Excercies/blob/main/Book%20excercise.R)

# Data Visualisation with R (ggplot2) 

This repository demonstrates data visualisation in R using ggplot2 and other tidyverse tools. The examples use the built-in mpg dataset and show how to create scatterplots, regression lines, histograms, boxplots, density plots, and faceted charts.

The explanations are designed to teach key concepts in R visualisation, including aesthetic mappings, geometric objects, layering, and faceting.

## 1. Setup

Before starting, we need to load the required libraries:

### Load tidyverse for data manipulation and ggplot2

    library(tidyverse)

### Additional datasets (optional for exercises)

    library(palmerpenguins)
    library(nycflights13)
    library(gapminder)

### For improved text labels

    library(ggrepel)

### For formatting axes and scales

    library(scales)

### For reproducible file paths

    library(here)

tidyverse includes ggplot2, dplyr, and other useful packages.

Other libraries provide datasets or extra functionality for plots.

## 2. Exploring the Dataset
### View the dataset in a spreadsheet-style window

    view(mpg)

### Quick summary of dataset structure and variables

    glimpse(mpg)

view() opens the dataset for visual inspection.

<img width="805" height="508" alt="image" src="https://github.com/user-attachments/assets/88d1d285-a4be-471c-8f61-95c1e570faef" />

glimpse() shows variable types and a few example values.

<img width="853" height="231" alt="image" src="https://github.com/user-attachments/assets/a3820883-78cc-4218-81a6-95f631c1d2b9" />

## 3. Scatterplots and Aesthetic Mappings

In ggplot2, aesthetics (color, shape, size, alpha) define how data variables are mapped to visual properties.

### Scatterplot with color representing vehicle class

    ggplot(mpg, aes(x = displ, y = hwy, color = class)) +
      geom_point()

  <img width="995" height="546" alt="image" src="https://github.com/user-attachments/assets/2a169124-97a0-4e85-aefd-b02f70b5d314" />

  x = displ → engine displacement

  y = hwy → highway miles per gallon

### Using shape instead of colour

    ggplot(mpg, aes(x = displ, y = hwy, shape = class)) +
      geom_point()

### Using size (works better with numeric variables)

    ggplot(mpg, aes(x = displ, y = hwy, size = class)) +
      geom_point()

<img width="995" height="546" alt="image" src="https://github.com/user-attachments/assets/8f7ffa57-d879-4f3f-87e1-d3c06d63e62d" />

### Using transparency
    ggplot(mpg, aes(x = displ, y = hwy, alpha = class)) +
      geom_point()

<img width="995" height="546" alt="image" src="https://github.com/user-attachments/assets/7226a2ab-cffc-4abf-b6bb-361adc91e2d8" />

## 3.1 Setting Fixed Colours

### Fixed blue points

    ggplot(mpg, aes(x = displ, y = hwy)) + 
      geom_point(color = "blue")

###  Fixed colour with varying transparency

    ggplot(mpg, aes(x = displ, y = hwy, alpha = class)) + 
      geom_point(color = "blue")

<img width="995" height="546" alt="image" src="https://github.com/user-attachments/assets/feaa0a04-3d75-465d-bcd4-5257abdfb634" />

# 3.2 Example: Pink Triangles

    ggplot(mpg, aes(x = displ, y = hwy)) + 
      geom_point(color = "pink", fill = "pink", shape = 21,size = 3)

<img width="995" height="546" alt="image" src="https://github.com/user-attachments/assets/960980c6-12d2-4a9c-a6ad-ffae438a3c2b" />

shapes number

<img width="567" height="293" alt="image" src="https://github.com/user-attachments/assets/3577ba02-5851-4889-8c83-c0587b6bdfde" />

Fig 1 (Wickham, Çetinkaya-Rundel & Grolemund, 2019, Fig. 9‑1)

fill controls the inside colour (only for shapes with a fillable area)

# 3.3 Common Mistake
### Incorrect: ggplot thinks "blue" is a variable
    ggplot(mpg) + 
      geom_point(aes(x = displ, y = hwy, color = "blue"))

Fix:

### Correct: set color outside aes()
    ggplot(mpg) + 
      geom_point(aes(x = displ, y = hwy), color = "blue")

<img width="995" height="546" alt="image" src="https://github.com/user-attachments/assets/293aa37a-5f7b-4832-9382-e5a8adb8683e" />

# 3.4 Stroke and Conditional Colours

### Stroke changes outline thickness (only certain shapes)

    ggplot(mpg, aes(x = displ, y = hwy)) + 
      geom_point(color = "blue", fill = "blue", shape = 17, stroke = 5)

<img width="995" height="546" alt="image" src="https://github.com/user-attachments/assets/87465504-b82b-424d-aad3-82d6ecfdccf3" />

### Conditional colour based on a logical expression  

    ggplot(mpg, aes(x = displ, y = hwy, color = displ < 5)) + 
      geom_point(shape = 17)

<img width="995" height="546" alt="image" src="https://github.com/user-attachments/assets/617fea42-af61-4bd1-b5d2-a601d77d0c66" />

stroke adjusts the border of points

You can map logical conditions (TRUE/FALSE) to colour

# 4. Geometric Objects (geom_*)

geom_* functions define the type of plot:

## Regression line (loess smoothing)
    ggplot(mpg, aes(x = displ, y = hwy)) + 
      geom_smooth(method = "loess")
      
<img width="995" height="546" alt="image" src="https://github.com/user-attachments/assets/095fc349-7f92-4dd6-9f4f-2b0f395d6281" />

## Separate regression lines by drive type
    ggplot(mpg, aes(x = displ, y = hwy, linetype = drv)) + 
      geom_smooth()
      
<img width="995" height="546" alt="image" src="https://github.com/user-attachments/assets/ac638ccc-d3f4-4aab-b439-11a3223c07f2" />

## Scatterplot + regression lines
    ggplot(mpg, aes(x = displ, y = hwy, color = drv)) +
      geom_point() +
      geom_smooth(aes(linetype = drv))

<img width="995" height="546" alt="image" src="https://github.com/user-attachments/assets/85cfd02f-eab0-451e-b6ba-4240b1ffe96c" />

  geom_point() → scatterplot

  geom_smooth() → regression line

linetype = drv → different line styles for each drive type

# 5. Distributions

### Histogram

    ggplot(mpg, aes(x = hwy)) +
      geom_histogram(binwidth = 2)

<img width="995" height="546" alt="image" src="https://github.com/user-attachments/assets/231a23d4-2e18-4636-ae7d-93e115f56fbf" />

### Density plot

    ggplot(mpg, aes(x = hwy)) +
      geom_density()

<img width="995" height="546" alt="image" src="https://github.com/user-attachments/assets/03d4f0b7-9638-45ab-a3dc-2942aa2e4c8d" />

### Boxplot

    ggplot(mpg, aes(y = hwy)) +
      geom_boxplot()

<img width="995" height="546" alt="image" src="https://github.com/user-attachments/assets/4c6b5858-d4c5-4fed-8f9a-f1c55c8fc2ce" />

# 5.1 Ridgeline Plot (ggridges)

    library(ggridges)

    ggplot(mpg, aes(x = hwy, y = drv, fill = drv)) +
      geom_density_ridges(alpha = 0.5, show.legend = FALSE)

<img width="995" height="546" alt="image" src="https://github.com/user-attachments/assets/0c9941d2-8a89-49bb-bf61-b49d3bd0083a" />

Shows distribution of hwy by drive type (drv)

alpha → transparency

show.legend = FALSE → hides legend

# 6. Advanced Scatterplots
### Highlight a specific class
    
    ggplot(mpg, aes(x = displ, y = hwy)) +
      geom_point() +
      geom_point(data = mpg %>% filter(class == '2seater'), color = 'red', size = 3)

<img width="995" height="546" alt="image" src="https://github.com/user-attachments/assets/1bfcd448-b356-4d53-b930-e1957bf87f7c" />

Highlighting allows focus on a subset of data

# 7. Faceting (Multiple Panels)

### Separate plots by cylinders

    ggplot(mpg, aes(x = displ, y = hwy)) + 
      geom_point() + 
      facet_wrap(~ cyl)

<img width="995" height="546" alt="image" src="https://github.com/user-attachments/assets/12c53128-9607-4f84-9b44-ff0539357fcb" />

### Grid with free scales

    ggplot(mpg, aes(x = displ, y = hwy)) + 
      geom_point() + 
      facet_grid(drv ~ cyl, scales = "free_y")

facet_wrap(~ cyl) → one plot per cylinder group

facet_grid(rows ~ cols, scales = "free") → grid layout, axes can vary

<img width="995" height="546" alt="image" src="https://github.com/user-attachments/assets/187df5cb-747e-4022-95cc-7c142ab63fec" />

## References 

Wickham, H., Çetinkaya-Rundel, M. & Grolemund, G., 2019. R for Data Science, 2nd edition. Sebastopol, CA: O'Reilly Media. Figure 9‑1.
